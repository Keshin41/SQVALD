{# Unused -> go to calendar #}

{% extends 'base.html.twig' %}

{% block title %} Évènements {% endblock %}

{% block style %}
	<style>
        #resetFilter {
            text-transform: none;
            font-weight: normal;
        }

        #resetFilter:hover {
            font-style: italic;
            font-weight: bold;
        }
	</style>
{% endblock %}

{% block script %}
	<script>
        window.onload(function () {
            var defaultChoice = document.getElementById('search_event_isEndBefore_placeholder').parentElement;
            defaultChoice.style.display = 'none';
        })
	</script>
{% endblock %}

{% block body %}
	<main>
		<h1 class="container">Évènements</h1>
		<div class="container mt-3">
			<div class="d-flex align-items-center">
				<h2 class="d-inline">Recherche</h2>
				<a class="text-muted mx-4 text-decoration-none" id="resetFilter" href="{{ path('events_index') }}">Supprimer
					les filtres</a>
			</div>
		</div>
		<hr class="featurette-divider mt-0 mb-3">
		<div>
			<div class="container">
				<div>
					{{ form_start(form) }}
					<div class="row">
						<div class="col-6">{{ form_row(form.keyword) }}</div>
						<div class="col-6">{{ form_row(form.place) }}</div>
					</div>
					{{ form_label(form.categories) }}
					<div class="row my-2 border-top border-bottom py-2">
						{% for i in 0..form.categories|length-1 %}
							<div class="col-3">
								{{ form_widget(form.categories[i]) }}
								{{ form_label(form.categories[i]) }}
							</div>
						{% endfor %}
					</div>
					{{ form_label(form.date) }}
					<div class="row align-items-center mb-3">
						{% for child in form.isEndBefore %}
							<div class="col-2">{{ form_widget(child) }}</div>
						{% endfor %}
						<div class="col-8">
							{{ form_widget(form.date) }}
						</div>
					</div>
					{{ form_rest(form) }}
					{{ form_end(form) }}
				</div>
			</div>
			<h2 class="container mt-0">Résultats</h2>
			<hr class="featurette-divider mt-0 mb-0">
			<div class="container">
				{% for event in events %}
					<a href="{{ path('showEvent', {'slug':event.slug}) }}"
					   style="color: black; text-decoration: none; padding: 0; text-transform: none">
						<div class="member-entry fw-normal p-2">
							<div class="row member-details w-100 m-0">
								<div class="d-flex h-100 flex-column justify-content-between">
									<div class="d-flex w-100 justify-content-between mb-0">
										<h3 class="h4 mb-0">[{{ event.category }}] {{ event.title }}</h3>
										<p class="m-0">{{ event.createdAt|format_datetime(locale='fr',pattern='d MMM Y') }}</p>
									</div>
									<div class="d-flex w-100 justify-content-between">
										<p class="mb-0">Du {{ event.dateBegin|format_datetime(locale='fr',pattern='d MMM Y') }} au {{ event.dateEnd|format_datetime(locale='fr',pattern='d MMM Y') }}</p>
										<p class="mb-2">{{ event.place }}</p>
									</div>
									<p style="font-size: 1rem">{{ event.getSummary }}</p>
									<p class="m-0">Auteur(s) :
										{% for author in event.author %}
											{% if loop.index != 1 %}
												{{ ', ' }}
											{% endif %}
											{{ author.getFullName }}
										{% endfor %}
									</p>
								</div>
							</div>
						</div>
					</a>
				{% endfor %}
				<div class="d-flex justify-content-center">
					{% do events.setPageRange(5) %}
					{{ knp_pagination_render(events, 'pagination/pagination.html.twig') }}
				</div>
			</div>
		</div>
	</main>
{% endblock %}

